{% extends 'base.html' %}
{% block content %}


<div class="container d-flex justify-content-center align-items-center min-vh-100">
    <div class="form-container {% if mode == 'signup' %}active{% endif %}" id="formContainer">
        <!-- Sign Up Form -->
        <div class="form-box sign-up-box">
            <h2>Registration</h2>
            <form method="post" action="{% url 'signup' %}" class="sign-up-form">
                {% csrf_token %}
                {{ form.non_field_errors }}

                <div class="mb-3">
                    {{ form.username.errors}}
                    {{ form.username }}
                </div>
                <div class="mb-3">
                    {{ form.email.errors }}
                    {{ form.email }}
                </div>
                <div class="mb-3">
                    {{ form.password1.errors }}
                    {{ form.password1 }}
                </div>
                <div class="mb-3">
                    {{ form.password2.errors }}
                    {{ form.password2 }}
                </div>

                <button type="submit" class="btn btn-primary w-100">Register</button>
            </form>
        </div>

        <!-- Login Form -->
        <div class="form-box login-box">
            <h2>Login</h2>
            <form method="post" action="{% url 'login' %}" class="sign-in-form">
                {% csrf_token %}
                {{ lform.non_field_errors }}

                <div class="mb-3">
                    {{ lform.username }}
                </div>
                <div class="mb-3">
                    {{ lform.password }}
                </div>

                <button type="submit" class="btn btn-primary w-100">Login</button>
            </form>
        </div>

        <!-- Panels -->
        <div class="overlay-container">
            <div class="overlay">
                <div class="overlay-panel overlay-left">
                    <h3>Welcome Back!</h3>
                    <p>Already have an account?</p>
                    <button class="btn btn-light" id="loginBtn">Login</button>
                </div>
                <div class="overlay-panel overlay-right">
                    <h3>Hello, Fighter!</h3>
                    <p>Don't have an account?</p>
                    <button class="btn btn-light" id="signupBtn">Register</button>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    body {
        background-color: #000;
        /* already black */
        color: #f1f1f1;
    }

    .form-container {
        background: #1e1e1e;
        width: 850px;
        max-width: 100%;
        min-height: 500px;
        border-radius: 15px;
        overflow: hidden;
        position: relative;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.8);
        display: flex;
    }

    .form-box {
        position: absolute;
        top: 0;
        height: 100%;
        width: 50%;
        padding: 50px;
        transition: all 0.6s ease-in-out;
        box-sizing: border-box;
        color: #f1f1f1;
    }

    .sign-up-box {
        left: 0;
        opacity: 0;
        z-index: 1;
    }

    .login-box {
        left: 0;
        z-index: 2;
        width: 50%;
    }

    .overlay-container {
        position: absolute;
        top: 0;
        left: 50%;
        width: 50%;
        height: 100%;
        overflow: hidden;
        transition: transform 0.6s ease-in-out;
        z-index: 100;
    }

    .overlay {
        background: linear-gradient(to right, rgba(86, 48, 212, 0.9), rgba(119, 30, 92, 0.9));
        color: #fff;
        position: relative;
        left: -100%;
        height: 100%;
        width: 200%;
        transform: translateX(0);
        transition: transform 0.6s ease-in-out;
        display: flex;
    }

    .overlay-panel {
        position: absolute;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 0 40px;
        text-align: center;
        top: 0;
        height: 100%;
        width: 50%;
        box-sizing: border-box;
        z-index: 101;
        /* ensure text is above gradient */
    }

    .overlay-panel h3,
    .overlay-panel p,
    .overlay-panel button {
        color: #fff !important;
        text-shadow: 0 2px 6px rgba(0, 0, 0, 0.6);
    }

    .overlay-left {
        transform: translateX(-20%);
        left: 0;
    }

    .overlay-right {
        right: 0;
        transform: translateX(0);
    }

    /* When Signup is Active */
    .form-container.active .sign-up-box {
        transform: translateX(100%);
        opacity: 1;
        z-index: 5;
    }

    .form-container.active .login-box {
        transform: translateX(100%);
        opacity: 0;
        z-index: 1;
    }

    .form-container.active .overlay-container {
        transform: translateX(-100%);
    }

    .form-container.active .overlay {
        transform: translateX(50%);
    }

    /* Inputs */
    .form-box input {
        background: #2a2a2a;
        border: 1px solid #444;
        color: #f1f1f1;
        padding: 10px;
        border-radius: 6px;
        width: 100%;
    }

    .form-box input:focus {
        border-color: #667eea;
        outline: none;
        background: #333;
    }

    /* Buttons */
    .btn-primary {
        background-color: #667eea;
        border: none;
        color: #fff;
    }

    .btn-primary:hover {
        background-color: #5563c1;
    }

    .btn-light {
        background-color: #f1f1f1;
        color: #000;
        border: none;
    }

    .btn-light:hover {
        background-color: #ddd;
    }

    /* Fix panel buttons so text is dark */
    .overlay-panel .btn-light {
        background-color: #f1f1f1;
        color: #111 !important;
        /* dark text */
        border: none;
    }

    .overlay-panel .btn-light:hover {
        background-color: #ddd;
        color: #000 !important;
    }
</style>

<script>
    const container = document.getElementById("formContainer");
    const signupBtn = document.getElementById("signupBtn");
    const loginBtn = document.getElementById("loginBtn");

    if (container && signupBtn) {
        signupBtn.addEventListener("click", () => {
            container.classList.add("active");
        });
    }

    if (container && loginBtn) {
        loginBtn.addEventListener("click", () => {
            container.classList.remove("active");
        });
    }
</script>


{% endblock %}